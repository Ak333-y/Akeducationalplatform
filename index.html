<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>study app</title>
  <style>
    body { font-family: "メイリオ", sans-serif; background:#f8f9fa; text-align:center; }
    #login, #quizApp { margin-top: 40px; }
    input, button { margin: 8px; padding: 8px; border-radius: 6px; border:1px solid #ccc; }
    button { background: #007bff; color:white; cursor:pointer; }
    button:hover { background: #0056b3; }
    .question-box { background:white; margin:20px auto; padding:15px; width:90%; max-width:500px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  </style>
</head>
<body>

  <!-- ログイン画面 -->
  <div id="login">
    <h2>ログイン</h2>
    <input type="text" id="username" placeholder="ユーザー名"><br>
    <input type="password" id="password" placeholder="パスワード"><br>
    <button onclick="login()">ログイン</button>
    <p id="loginMessage"></p>
  </div>

  <!-- クイズ画面 -->
  <div id="quizApp" style="display:none;">
    <h2 id="welcome"></h2>
    <p>ポイント：<span id="points">0</span></p>
    <button onclick="startQuiz()">テスト開始！</button>
    <div id="quizArea"></div>
  </div>

<script>
  // ======== ①ユーザー設定 ========
  const users = [
    { username: "user011001", password: "assalam" },
    { username: "test", password: "pass" }
  ];

  let currentUser = null;
  let points = 0;

  // ======== ②問題データ（後から追加OK） ========
  const allQuestions = [
    // 一問一答
    { type: "一問一答", question: "日本の首都は？", answer: "東京", point: 10 },
    { type: "一問一答", question: "水の化学式は？", answer: "H2O", point: 5 },
    { type: "一問一答", question: "πの値を3桁で？", answer: "3.14", point: 8 },

    // 単語テスト
    { type: "単語", question: "『矜持』の意味は？", answer: "誇り", point: 15 },
    { type: "単語", question: "『悠然』の意味は？", answer: "落ち着いている様子", point: 10 },
    { type: "単語", question: "『傲慢』の意味は？", answer: "高慢で人を見下すこと", point: 12 },
  ];

  // ======== ③ログイン処理 ========
  function login() {
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    const message = document.getElementById("loginMessage");

    const user = users.find(x => x.username === u && x.password === p);
    if (user) {
      currentUser = user;
      document.getElementById("login").style.display = "none";
      document.getElementById("quizApp").style.display = "block";
      document.getElementById("welcome").textContent = `${u} さん、ようこそ！🔥`;
    } else {
      message.textContent = "ユーザー名またはパスワードが違います";
      message.style.color = "red";
    }
  }

  // ======== ④テスト開始処理 ========
  function startQuiz() {
    points = 0;
    document.getElementById("points").textContent = points;
    const quizArea = document.getElementById("quizArea");
    quizArea.innerHTML = "";

    // 100問中ランダム10問（今は少ないけど対応済）
    const shuffled = allQuestions.sort(() => 0.5 - Math.random());
    const selected = shuffled.slice(0, 10);

    selected.forEach((q, index) => {
      const box = document.createElement("div");
      box.className = "question-box";
      box.innerHTML = `
        <h4>第${index + 1}問（${q.type}）</h4>
        <p>${q.question}</p>
        <input type="text" id="answer${index}" placeholder="答えを入力">
        <button onclick="checkAnswer(${index}, '${q.answer}', ${q.point})">送信</button>
        <p id="result${index}"></p>
      `;
      quizArea.appendChild(box);
    });
  }

  // ======== ⑤採点＋ポイント処理 ========
  function checkAnswer(i, correctAnswer, pt) {
    const ans = document.getElementById(`answer${i}`).value.trim();
    const result = document.getElementById(`result${i}`);
    if (ans === correctAnswer) {
      points += pt;
      result.textContent = `正解！ +${pt}pt 🎉`;
      result.style.color = "green";
    } else {
      result.textContent = `不正解 ❌（正解：${correctAnswer}）`;
      result.style.color = "red";
    }
    document.getElementById("points").textContent = points;
  }

</script>
</body>
</html>
